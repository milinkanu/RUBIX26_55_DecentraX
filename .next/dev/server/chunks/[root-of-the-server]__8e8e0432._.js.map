{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Milin/Desktop/RUBIX26/FoundIt/src/lib/db.ts"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst MONGODB_URI = process.env.MONGO_URI || \"\";\r\n\r\nif (!MONGODB_URI) {\r\n    throw new Error(\r\n        \"Please define the MONGO_URI environment variable inside .env.local\"\r\n    );\r\n}\r\n\r\ninterface MongooseCache {\r\n    conn: typeof mongoose | null;\r\n    promise: Promise<typeof mongoose> | null;\r\n}\r\n\r\ndeclare global {\r\n    var mongoose: MongooseCache;\r\n}\r\n\r\nlet cached = global.mongoose;\r\n\r\nif (!cached) {\r\n    cached = global.mongoose = { conn: null, promise: null };\r\n}\r\n\r\nasync function connectDB() {\r\n    if (cached.conn) {\r\n        return cached.conn;\r\n    }\r\n\r\n    if (!cached.promise) {\r\n        const opts = {\r\n            bufferCommands: false,\r\n        };\r\n\r\n        cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\r\n            return mongoose;\r\n        });\r\n    }\r\n    try {\r\n        cached.conn = await cached.promise;\r\n    } catch (e) {\r\n        cached.promise = null;\r\n        throw e;\r\n    }\r\n\r\n    return cached.conn;\r\n}\r\n\r\nexport default connectDB;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,SAAS,IAAI;AAE7C,IAAI,CAAC,aAAa;IACd,MAAM,IAAI,MACN;AAER;AAWA,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACT,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAC3D;AAEA,eAAe;IACX,IAAI,OAAO,IAAI,EAAE;QACb,OAAO,OAAO,IAAI;IACtB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACjB,MAAM,OAAO;YACT,gBAAgB;QACpB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACvD,OAAO;QACX;IACJ;IACA,IAAI;QACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACtC,EAAE,OAAO,GAAG;QACR,OAAO,OAAO,GAAG;QACjB,MAAM;IACV;IAEA,OAAO,OAAO,IAAI;AACtB;uCAEe"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Milin/Desktop/RUBIX26/FoundIt/src/models/Item.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from \"mongoose\";\r\n\r\nexport interface IItem extends Document {\r\n    name: string;\r\n    phone: string;\r\n    email: string;\r\n    title: string;\r\n    description: string;\r\n    verify: string;\r\n    category: string;\r\n    type?: string;\r\n    location: {\r\n        city: string;\r\n        area: string;\r\n        landmark?: string;\r\n    };\r\n    file: string;\r\n    createdAt: Date;\r\n}\r\n\r\nconst itemSchema: Schema<IItem> = new Schema(\r\n    {\r\n        name: String,\r\n        phone: { type: String, select: false },\r\n        email: { type: String, select: false },\r\n        title: String,\r\n        description: String,\r\n        verify: String,\r\n        type: { type: String, default: \"Found\" },\r\n        category: {\r\n            type: String,\r\n            enum: [\"Mobile\", \"Wallet\", \"Documents\", \"Bag\", \"Keys\", \"Electronics\", \"Other\"],\r\n        },\r\n        location: {\r\n            city: String,\r\n            area: String,\r\n            landmark: String,\r\n        },\r\n        file: String,\r\n    },\r\n    { timestamps: true }\r\n);\r\n\r\nitemSchema.index({ category: 1 });\r\nitemSchema.index({ \"location.city\": 1 });\r\nitemSchema.index({ createdAt: -1 });\r\n\r\nconst Item: Model<IItem> = mongoose.models.Item || mongoose.model<IItem>(\"Item\", itemSchema);\r\n\r\nexport default Item;\r\n"],"names":[],"mappings":";;;;AAAA;;AAoBA,MAAM,aAA4B,IAAI,kKAAM,CACxC;IACI,MAAM;IACN,OAAO;QAAE,MAAM;QAAQ,QAAQ;IAAM;IACrC,OAAO;QAAE,MAAM;QAAQ,QAAQ;IAAM;IACrC,OAAO;IACP,aAAa;IACb,QAAQ;IACR,MAAM;QAAE,MAAM;QAAQ,SAAS;IAAQ;IACvC,UAAU;QACN,MAAM;QACN,MAAM;YAAC;YAAU;YAAU;YAAa;YAAO;YAAQ;YAAe;SAAQ;IAClF;IACA,UAAU;QACN,MAAM;QACN,MAAM;QACN,UAAU;IACd;IACA,MAAM;AACV,GACA;IAAE,YAAY;AAAK;AAGvB,WAAW,KAAK,CAAC;IAAE,UAAU;AAAE;AAC/B,WAAW,KAAK,CAAC;IAAE,iBAAiB;AAAE;AACtC,WAAW,KAAK,CAAC;IAAE,WAAW,CAAC;AAAE;AAEjC,MAAM,OAAqB,mKAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,mKAAQ,CAAC,KAAK,CAAQ,QAAQ;uCAElE"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Milin/Desktop/RUBIX26/FoundIt/src/app/api/items/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport connectDB from \"@/lib/db\";\r\nimport Item from \"@/models/Item\";\r\n\r\nexport async function GET(req: NextRequest) {\r\n    await connectDB();\r\n    try {\r\n        const { searchParams } = new URL(req.url);\r\n        const category = searchParams.get(\"category\");\r\n        const city = searchParams.get(\"city\");\r\n        const area = searchParams.get(\"area\");\r\n\r\n        let query: any = {};\r\n\r\n        if (category) {\r\n            query.category = category;\r\n        }\r\n\r\n        if (city) {\r\n            query[\"location.city\"] = new RegExp(`^${city}$`, \"i\");\r\n        }\r\n\r\n        if (area) {\r\n            query[\"location.area\"] = new RegExp(area, \"i\");\r\n        }\r\n\r\n        const items = await Item.find(query).sort({ createdAt: -1 });\r\n        return NextResponse.json(items);\r\n    } catch (err: any) {\r\n        return NextResponse.json({ success: false, message: err.message }, { status: 500 });\r\n    }\r\n}\r\n\r\nexport async function POST(req: NextRequest) {\r\n    await connectDB();\r\n    try {\r\n        const body = await req.json();\r\n        const newItem = new Item(body);\r\n        await newItem.save();\r\n        return NextResponse.json({ success: true, item: newItem }, { status: 201 });\r\n    } catch (err: any) {\r\n        return NextResponse.json({ success: false, message: err.message }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,GAAgB;IACtC,MAAM,IAAA,6HAAS;IACf,IAAI;QACA,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;QACxC,MAAM,WAAW,aAAa,GAAG,CAAC;QAClC,MAAM,OAAO,aAAa,GAAG,CAAC;QAC9B,MAAM,OAAO,aAAa,GAAG,CAAC;QAE9B,IAAI,QAAa,CAAC;QAElB,IAAI,UAAU;YACV,MAAM,QAAQ,GAAG;QACrB;QAEA,IAAI,MAAM;YACN,KAAK,CAAC,gBAAgB,GAAG,IAAI,OAAO,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE;QACrD;QAEA,IAAI,MAAM;YACN,KAAK,CAAC,gBAAgB,GAAG,IAAI,OAAO,MAAM;QAC9C;QAEA,MAAM,QAAQ,MAAM,kIAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE;QAC1D,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,KAAU;QACf,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,SAAS,IAAI,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACrF;AACJ;AAEO,eAAe,KAAK,GAAgB;IACvC,MAAM,IAAA,6HAAS;IACf,IAAI;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,UAAU,IAAI,kIAAI,CAAC;QACzB,MAAM,QAAQ,IAAI;QAClB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM;QAAQ,GAAG;YAAE,QAAQ;QAAI;IAC7E,EAAE,OAAO,KAAU;QACf,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,SAAS,IAAI,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACrF;AACJ"}}]
}